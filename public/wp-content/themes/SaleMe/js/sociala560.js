var Message;var __id;jQuery("a[id^='addfacebooksupport']").click(function(e){var holdid=jQuery(this).attr('id');var id=holdid.replace('addfacebooksupport-','');jQuery('#loadsinglefb').append("<div id='loadingimage'></div>");var CustomMessage="";CustomMessage=jQuery("#FacebookCustomSupport").val();__id=$("#submittofacebook").is(':checked')?1:0;if(CustomMessage.length>2){social_addSpecialSupport(id,'facebook',CustomMessage,__id);}else{social_addsupport(id,'facebook',__id);}});jQuery("a[id^='addtwittersupport']").click(function(e){var holdid=jQuery(this).attr('id');var id=holdid.replace('addtwittersupport-','');jQuery('#loadsingletw').append("<div id='loadingimage'></div>");var CustomMessage="";CustomMessage=jQuery("#TwitterCustomSupport").val();if(CustomMessage.length>2){social_addSpecialSupport(id,'twitter',CustomMessage);}else{social_addsupport(id,'twitter');}});jQuery("a[id^='addtumblrsupport']").click(function(e){var holdid=jQuery(this).attr('id');var id=holdid.replace('addtumblrsupport-','');jQuery('#loadsingletbl').append("<div id='loadingimage'></div>");var CustomMessage="";CustomMessage=jQuery("#TumblrCustomSupport").val();if(CustomMessage.length>2){social_addSpecialSupport(id,'tumblr',CustomMessage);}else{social_addsupport(id,'tumblr');}});jQuery("a[id^='removefacebooksupport']").click(function(e){var holdid=jQuery(this).attr('id');var id=holdid.replace('removefacebooksupport-','');social_removesupport(id,'facebook');});jQuery("a[id^='removetwittersupport']").click(function(e){var holdid=jQuery(this).attr('id');var id=holdid.replace('removetwittersupport-','');social_removesupport(id,'twitter');});jQuery("a[id^='removetumblrsupport']").click(function(e){var holdid=jQuery(this).attr('id');var id=holdid.replace('removetumblrsupport-','');social_removesupport(id,'tumblr');});jQuery("#facebooklogin").click(function(e){social_startlogin('facebook',false);return false;});jQuery("#twitterlogin").click(function(e){social_startlogin('twitter',false);return false;});jQuery("#tumblrlogin").click(function(e){social_startlogin('tumblr',false);return false;});jQuery(document).ready(function(){jQuery("#logoutsocial").click(function(e){social_startlogout();return false;});});function social_startlogout(){var CurrentLocation=window.location.href;window.location.replace(settings.authlocation+"handler/index.php?action=logout&returnto="+ encodeURIComponent(CurrentLocation));}
function social_isloggedin(){var data={action:'social_isloggedin'};jQuery.post(settings.ajax,data,function(response){response=response.trim();if(response.substring(0,2)=="ok"){return true;}else{return false;}});}
function social_isproviderloggedin(provider){var ajaxPromise=jQuery.ajax({url:settings.ajax,data:{action:'social_Specialisloggedin','provider':provider}});var dff=jQuery.Deferred();ajaxPromise.then(function(data){dff.resolve(data);});return dff.promise();}
function social_removesupport(project_id,provider){var data={action:'social_removesupport_function','campaign_id':project_id,'provider':provider};var holder=social_isproviderloggedin(provider);jQuery('#loadsingle'+provider).append("<div id='loadingimage'></div>");holder.done(function(result){result=parseInt(result);if(result>0){jQuery.post(settings.ajax,data,function(response){response=response.trim();if(response.substring(0,2)=="ok"){location.reload();}else{console.log('Got this from the server: '+ response);}});}else{social_startlogin(provider,false);}});}
$(document).ready(function(){$("#submittofacebook").on("change",function(){__id=$("#submittofacebook").is(':checked')?1:0;console.log("submittofacebook: changed:"+__id);});});